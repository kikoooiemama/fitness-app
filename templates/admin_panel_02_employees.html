{% extends "admin_panel.html" %}
{% block bar_menu %}
<li class="nav-item">
    <a class="nav-link" aria-current="page" href="{{ url_for('ap_bids') }}">
        <span data-feather="home"></span>
        Заявки
    </a>
</li>
<li class="nav-item">
    <a class="nav-link active" aria-current="page" href="{{ url_for('ap_employees') }}">
        <span data-feather="home"></span>
        Сотрудники
    </a>
</li>
<li class="nav-item">
    <a class="nav-link" aria-current="page" href="{{ url_for('ap_clients') }}">
        <span data-feather="home"></span>
        Клиенты
    </a>
</li>
<li class="nav-item">
    <a class="nav-link" aria-current="page" href="{{ url_for('ap_reports') }}">
        <span data-feather="home"></span>
        Отчеты
    </a>
</li>
<li class="nav-item">
    <a class="nav-link" aria-current="page" href="{{ url_for('ap_price_list') }}">
        <span data-feather="home"></span>
        Прейскурант
    </a>
</li>
{% endblock %}
{% block main_content %}
<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Панель администратора</h1>
    </div>
    {% if error %}
    <div class="alert alert-warning alert-dismissible fade show" role="alert">
        <strong>Регистрация отменена!</strong>{{error}}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    {% endif %}
    <div class="d-flex mb-10">
        <!-- Кнопка-триггер модального окна админа -->
        <button type="button" class="btn btn-primary mb-value me-3 ms-3" data-bs-toggle="modal"
                data-bs-target="#regAdmin">
            Зарегистрировать Администратора
        </button>

        <!-- Модальное окно админа -->
        <div class="modal fade" id="regAdmin" tabindex="-1" aria-labelledby="regAdminLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="regAdminLabel">Регистрация администратора</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
                    </div>
                    <div class="modal-body">
                        <form action="/register_handler_admin" method="post" autocomplete="off">
                            <div class="mb-2">
                                <label for="inputUsername" class="form-label ">Логин</label>
                                <input type="text" name="username" class="form-control .input-sm" id="inputUsername">
                            </div>
                            <div class="mb-2">
                                <label for="inputPassword" class="form-label">Пароль</label>
                                <input type="password" name="password" class="form-control" id="inputPassword">
                            </div>
                            <div class="mb-2">
                                <label for="inputName" class="form-label">ФИО</label>
                                <input type="text" name="name" class="form-control" id="inputName">
                            </div>
                            <div class="mb-2">
                                <label for="inputEmail" class="form-label">E-mail</label>
                                <input type="email" name="email" class="form-control" id="inputEmail">
                            </div>
                            <div class="mb-2">
                                <label for="inputPhone" class="form-label">Телефон</label>
                                <input type="text" name="phone" class="form-control" id="inputPhone">
                            </div>
                            <div class="mb-3">
                                <label for="inputBirthday" class="form-label">Дата рождения:</label>
                                <input type="date" name="birthday" class="form-control" id="inputBirthday">
                            </div>
                            <div class="modal-footer d-flex justify-content-center">
                                <button type="submit" class="btn btn-primary">Зарегистрировать</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Кнопка-триггер модального окна тренера -->
        <button type="button" class="btn btn-primary me-3" data-bs-toggle="modal" data-bs-target="#regTrainer">
            Зарегистрировать Тренера
        </button>

        <!-- Модальное окно тренера -->
        <div class="modal fade" id="regTrainer" tabindex="-1" aria-labelledby="regTrainerLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="regTrainerLabel">Регистрация тренера</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
                    </div>
                    <div class="modal-body">
                        <form action="/register_handler_trainer" method="post" autocomplete="off">
                            <div class="mb-2">
                                <label for="inputUsernameTrainer" class="form-label ">Логин</label>
                                <input type="text" name="username" class="form-control .input-sm"
                                       id="inputUsernameTrainer">
                            </div>
                            <div class="mb-2">
                                <label for="inputPasswordTrainer" class="form-label">Пароль</label>
                                <input type="password" name="password" class="form-control" id="inputPasswordTrainer">
                            </div>
                            <div class="mb-2">
                                <label for="inputNameTrainer" class="form-label">ФИО</label>
                                <input type="text" name="name" class="form-control" id="inputNameTrainer">
                            </div>
                            <div class="mb-2">
                                <label for="inputEmailTrainer" class="form-label">E-mail</label>
                                <input type="email" name="email" class="form-control" id="inputEmailTrainer">
                            </div>
                            <div class="mb-2">
                                <label for="inputPhoneTrainer" class="form-label">Телефон</label>
                                <input type="text" name="phone" class="form-control" id="inputPhoneTrainer">
                            </div>
                            <div class="mb-3">
                                <label for="inputBirthdayTrainer" class="form-label">Дата рождения:</label>
                                <input type="date" name="birthday" class="form-control" id="inputBirthdayTrainer">
                            </div>
                            <div class="modal-footer d-flex justify-content-center">
                                <button type="submit" class="btn btn-primary">Зарегистрировать</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div class="container-fluid">
        <!--        <table class="table w-100">-->
        <table class="table table-hover w-100 mt-3">
            <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Имя</th>
                <th scope="col">Должность</th>
                <th scope="col">Дата рождения</th>
                <th scope="col">E-mail</th>
                <th scope="col">Телефон</th>
                <th scope="col">Дата регистрации</th>
                <th scope="col"></th>
                <th scope="col"></th>
            </tr>
            </thead>
            <tbody>
            {% for j_value in json_ap_data %}
            <tr>
                <th class="align-middle" scope="row">{{loop.index}}</th>
                <td class="align-middle">{{ j_value.name }}</td>
                <td class="align-middle">{{ j_value.position }}</td>
                <td class="align-middle">{{ j_value.date_of_birth }}</td>
                <td class="align-middle">{{ j_value.email }}</td>
                <td class="align-middle">{{ j_value.phone }}</td>
                <td class="align-middle">{{ j_value.created_at }}</td>
                <td class="align-middle col-1">
                    <form action="{{ 'ap_employees_update' }}" method="POST">
                        <!-- скрытый параметр -->
                        <input type="hidden" id="update_employee_id" name="update_employee_id" value={{ j_value.user_id
                               }}>
                        <input type="submit" class="btn btn-primary" value="Редактировать">
                    </form>
                </td>
                <td class="align-middle col-1">
                    <form action="/ap_employees_del/" method="POST">
                        <!-- скрытый параметр -->
                        <input type="hidden" id="del_employee_id" name="del_employee_id" value={{ j_value.user_id }}>
                        <input type="submit" class="btn btn-primary" value="Удалить">
                    </form>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</main>
{% endblock %}
{% block empty_main_block %}<p>В БД нет сотрудников.</p>{% endblock %}